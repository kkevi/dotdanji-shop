import {AppProps} from "next/app"
import Head from "next/head"
import {CssBaseline, ThemeProvider} from "@mui/material"
import {theme} from "styles/theme"
import {GlobalStyle} from "styles/global-styles"
import {ToastContainer} from "react-toastify"
import "react-toastify/dist/ReactToastify.css"
import {useLocalStorage} from "react-use"
import {useEffect} from "react"
import UserPool from "Login/login-section/UserPool"

function MyApp({Component, pageProps}: AppProps) {
    const [isLoggedIn, setIsLoggedIn] = useLocalStorage<{name: string; email: string} | null>("login")

    const currentUser = UserPool.getCurrentUser()?.getUsername()

    useEffect(() => {
        if (currentUser === "") {
            setIsLoggedIn(null)
        }
    }, [currentUser])

    return (
        <>
            <Head>
                <title>SIMKIDS</title>
                <meta name="description" content="Generated by create next app" />
                {/* favicon */}
                {/* font */}
                <link
                    href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square-round.css"
                    rel="stylesheet"
                ></link>
            </Head>
            <ThemeProvider theme={theme}>
                <CssBaseline />
                <GlobalStyle />
                <Component {...pageProps} />
                <ToastContainer autoClose={2000} pauseOnHover={false} hideProgressBar />
            </ThemeProvider>
        </>
    )
}

export default MyApp
